(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{1588:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-2",function(){return n(762)}])},762:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var a=n(8520),r=n.n(a),s=n(5893),i=n(8418),c=n(2745),o=n(4718),l=n(7294),u=n(6180),d=n(5553),h=n(6154),p=n(6076),v=n(7769),m=n(2192);function f(e,t,n,a,r,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(a,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function i(e){f(s,a,r,i,c,"next",e)}function c(e){f(s,a,r,i,c,"throw",e)}i(void 0)}))}}var j=n(9473);function g(e,t,n,a,r,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(a,r)}var w=function(){var e,t=(0,l.useState)(""),n=t[0],a=t[1],i=(0,l.useState)(""),c=i[0],o=i[1],u=(0,l.useState)(""),f=u[0],w=u[1],N=(0,l.useState)(""),b=N[0],y=N[1],C=(0,l.useState)(""),P=C[0],S=C[1],F=(0,l.useState)(null),_=F[0],k=F[1],E=(0,l.useState)(""),D=E[0],T=E[1],I=(0,j.v9)((function(e){return e})),M=(0,l.useState)(""),O=M[0],U=M[1],H=function(){function e(){return(e=x(r().mark((function e(t,n,a,s,i,c,o,l){var u,d,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=v[5].UpgradeableProxy[0],d=m.Mt,h=new p.CH(u,d,l),e.next=6,h.createCampaign(t,n,a,s,i,c,o,{gasLimit:1e6});case 6:return f=e.sent,e.next=9,f.wait(1);case 9:e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return{createNewProposal:function(t,n,a,r,s,i,c,o){return e.apply(this,arguments)}}}().createNewProposal,R=!(n&&c&&f&&b&&P&&_),Z=(e=r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)({method:"POST",url:"http://127.0.0.1:8000/upload_img/",data:{path:"image/".concat(O),content:t}}).then((function(e){T(e.data[0].path)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function i(e){g(s,a,r,i,c,"next",e)}function c(e){g(s,a,r,i,c,"throw",e)}i(void 0)}))});return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Create a Crowdfunding Campaign"}),(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Z(_);var t,a,r=(t=b,d.fi(t)),s=(a=P,Date.parse(a)/1e3);H(I.signer._address,n,c,f,r,s,D,I.signer)},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",children:"Title:"}),(0,s.jsx)("input",{type:"text",id:"title",value:n,onChange:function(e){return a(e.target.value)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",children:"Description:"}),(0,s.jsx)("textarea",{id:"description",value:c,onChange:function(e){return o(e.target.value)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",children:"Category:"}),(0,s.jsxs)("select",{id:"category",value:f,onChange:function(e){return w(e.target.value)},children:[(0,s.jsx)("option",{value:"",children:"Select a category"}),(0,s.jsx)("option",{value:"DeFi",children:"DeFi"}),(0,s.jsx)("option",{value:"NFT",children:"NFT"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"amount",children:"Amount:"}),(0,s.jsx)("input",{type:"number",id:"amount",value:b,onChange:function(e){return y(e.target.value)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"deadline",children:"Deadline:"}),(0,s.jsx)("input",{type:"date",id:"deadline",value:P,onChange:function(e){return S(e.target.value)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"image",children:"Image:"}),(0,s.jsxs)("div",{className:"image-upload",children:[(0,s.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){var e=n.result.replace("data:","").replace(/^.+,/,"");k(e),U(t.name)}}}),(0,s.jsx)("label",{htmlFor:"image",className:"custom-file-upload",children:"Upload Image"}),O&&(0,s.jsx)("span",{children:O})]})]}),(0,s.jsx)("button",{type:"submit",className:"new-campaign-btn",disabled:R,children:"Create"})]})]})};var N=function(){var e=(0,l.useState)(!1),t=e[0],n=e[1];return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:function(){n(!t)},className:"new-campaign",children:"Create New Campaign"}),(0,s.jsx)(u.Collapse,{isOpened:t,children:(0,s.jsx)(w,{})})]})},b=n(7114);function y(e,t,n,a,r,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(a,r)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function i(e){y(s,a,r,i,c,"next",e)}function c(e){y(s,a,r,i,c,"throw",e)}i(void 0)}))}}function P(e,t,n,a,r,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(a,r)}var S=function(){var e,t=function(){var e=(0,l.useState)([]),t=e[0],n=e[1];function a(){return(a=C(r().mark((function e(){var t,a,s,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new b.Q(window.ethereum),a=v[5].UpgradeableProxy[0],s=m.Mt,i=new p.CH(a,s,t),e.next=7,i.getCampaigns();case 7:c=e.sent,n(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return{campaigns:t,getCampaigns:function(){return a.apply(this,arguments)}}}(),n=t.campaigns,a=t.getCampaigns;(0,l.useEffect)((e=r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function i(e){P(s,a,r,i,c,"next",e)}function c(e){P(s,a,r,i,c,"throw",e)}i(void 0)}))}),[]);var u=n.map((function(e){var t={id:e.campaignId.toString()};return console.log(e),(0,s.jsx)("div",{className:"col-xl-10",children:(0,s.jsxs)("div",{className:"project-item mb-30",children:[(0,s.jsx)("div",{className:"thumb",style:{backgroundImage:"url(".concat(e.image,")")}}),(0,s.jsxs)("div",{className:"content",children:[(0,s.jsx)("div",{className:"cats",children:(0,s.jsx)(i.default,{href:"#",children:e[3]})}),(0,s.jsx)("div",{className:"author",children:(0,s.jsx)(i.default,{href:{pathname:"/project-details",query:t},children:e[1]})}),(0,s.jsx)("h5",{className:"title",children:(0,s.jsx)(i.default,{href:{pathname:"/project-details",query:t},children:e[2]})}),(0,s.jsxs)("div",{className:"project-stats",children:[(0,s.jsxs)("div",{className:"stats-value",children:[(0,s.jsxs)("span",{className:"value-title",children:["Raised of"," ",(0,s.jsxs)("span",{className:"value",children:[d.dF(e.amountCollected.toString())," ","ETH"]})]}),(0,s.jsxs)("span",{className:"stats-percentage",children:[Math.floor(parseInt(100*d.dF(e.amountCollected.toString()))/d.dF(e[4].toString())),"%"]})]}),(0,s.jsx)("div",{className:"stats-bar","data-value":93,children:(0,s.jsx)("div",{className:"bar-line"})})]})]})]})})}));return(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(c.Z,{pageName:"Explore the Projects"}),(0,s.jsx)("section",{className:"project-section section-gap-extra-bottom primary-soft-bg",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row justify-content-center project-items project-style-two",children:[(0,s.jsx)("div",{className:"col-xl-10",children:(0,s.jsx)(N,{})}),n&&u,(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"view-more-btn text-center mt-40",children:(0,s.jsx)(i.default,{href:"/project-details",children:(0,s.jsxs)("a",{className:"main-btn bordered-btn",children:["View More Project ",(0,s.jsx)("i",{className:"far fa-arrow-right"})]})})})})]})})})]})}}},function(e){e.O(0,[887,557,931,722,920,774,888,179],(function(){return t=1588,e(e.s=t);var t}));var t=e.O();_N_E=t}]);